<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./project.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/general.css"/>
    <link rel="stylesheet" href="./query.css" />
    <link rel="stylesheet" href="../css/query.css" />
    <title>Document</title>
  </head>
  <body>
    <div class="top-page">
      <header class="header">
      <a href="#">
        <img src="./img/logo.png" alt="" class="escal" />
      </a>
      <button class="btn-mobile-nav" aria-label="Toggle menu">
        <span class="hamburger-line line1"></span>
        <span class="hamburger-line line2"></span>
        <span class="hamburger-line line3"></span>
      </button>

      <nav class="main-nav">
        <ul class="main-nav-list">
          <li>
            <a class="main-nav-link" href="../index.html#about">ABOUT</a>
          </li>
          <li>
            <a class="main-nav-link" href="../index.html#news">NEWS</a>
          </li>
          <li>
            <a class="main-nav-link" href="../index.html#publications">PUBLICATIONS</a>
          </li>
          <li>
            <a class="main-nav-link" href="../index.html#blogs">BLOGS</a>
          </li>
          <li>
            <a class="main-nav-link nav-cta" href="../index.html#projects">PROJECTS</a>
          </li>
          <li>
            <a class="main-nav-link nav-cta" href="../index.html#supervisors">PEOPLE</a>
          </li>
        </ul>
        <span class="nav-indicator"></span>
      </nav>
    </header>

    <section class="project-header">
        <div class="project-container">
          <div class="project-container-text">
            <h1 class="project-header-name" id="project-title">Loading ..</h1>
            <p class="project-header-details" id="project-subtitle">
              Loading .....
            </p>
          </div>
        </div>
      </section>

    </div>
    <main>
      <section class="project-details-section">
        <div class="container grid-of-project">
          <div class="main-details" id="project-main-details">
            <!-- Overview, Objectives, Key Outcomes, Technical Approach will be injected here -->
          </div>

          <div class="sub-details" id="project-side-details">
            <!-- Status, Duration, Funding, Technologies -->
          </div>
        </div>
      </section>

      <section class="section-contributes">
        <div class="container">
          <h2 class="project-subtopics contribute-header">
            Project Contribute
          </h2>
        </div>

        <div class="container grid grid--5--cols" id="project-contributors">
          <!-- Contributors dynamically loaded -->
        </div>
      </section>

      <section class="section-github">
        <div class="container">
          <h2 class="project-subtopics contribute-header">
            GitHub Repositories
          </h2>
          <div class="git-repo-grid" id="project-github">
            <!-- GitHub repos dynamically loaded -->
          </div>
        </div>
      </section>
    </main>

       <!-- Section of footer -->
    <footer class="footer">
      <div class="container footer-grid">
        <div class="footer-1">
          <a href="#" class="footer-logo">
            <img
              src="./img/logo-3.png"
              alt=""
              class="escal"
              style="height: 3.8rem"
            />
          </a>

          <p class="footer-desc">
            Advancing the frontiers of neural interface technology through
            innovative research and collaboration
          </p>

          <ul class="social-links">
            <li>
              <a class="footer-link" href="#"
                ><ion-icon class="social-icon" name="logo-instagram"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="#"
                ><ion-icon class="social-icon" name="logo-facebook"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="#"
                ><ion-icon class="social-icon" name="logo-twitter"></ion-icon
              ></a>
            </li>
          </ul>
        </div>

        <div class="address-col">
          <p class="footer-heading">Contact us</p>
          <address class="contacts">
            <p class="address">peradeniya,university of peradeniya</p>
            <p>
              <a class="footer-link" href="tel:415-201-6370">1234567</a><br />
              <a class="footer-link" href="mailto:hello@omnifood.com"
                >nero@d.com</a
              >
            </p>
          </address>
        </div>

        <nav class="nav-col">
          <p class="footer-heading">Quick Links</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="#news">News</a></li>
            <li><a class="footer-link" href="#publications">Publication</a></li>
            <li><a class="footer-link" href="#blogs">Blog</a></li>
            <li><a class="footer-link" href="#projects">Projects</a></li>
            <li><a class="footer-link" href="#supervisors">People</a></li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Other Websites</p>
          <ul class="footer-nav">
            <li>
              <a
                class="footer-link"
                href="https://2yp-project-full-stack-web-site.vercel.app"
                target="_blank"
                >Admin Panel</a
              >
            </li>
            <li>
              <a
                class="footer-link"
                href="https://escal.ce.pdn.ac.lk"
                target="_blank"
                >ESCAL</a
              >
            </li>
            <li>
              <a
                class="footer-link"
                href="https://www.ce.pdn.ac.lk"
                target="_blank"
                >Peracom</a
              >
            </li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Rearch Area</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="#">Neural Interfaces</a></li>
            <li>
              <a class="footer-link" href="#">Brain-Computer Interfaces</a>
            </li>
            <li>
              <a class="footer-link" href="#">Neural Signal Processing</a>
            </li>
            <li><a class="footer-link" href="#">Neuroplasticity</a></li>
          </ul>
        </nav>
      </div>

      <div class="footer-line">
        <p class="copyright">
          Copyright &copy; 2027 by pera com, Inc. All rights reserved.
        </p>
      </div>
    </footer>


  </body>

  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
  <script>
    (async function () {
      const projectId = new URLSearchParams(window.location.search).get("id");

      if (!projectId) return;

      async function fetchJSON(path) {
        const res = await fetch(
          `https://2ypprojectfullstackwebsite-production.up.railway.app/api/v1/${path}`
        );
        if (!res.ok) throw new Error(res.statusText);
        return res.json();
      }

      try {
        const res = await fetchJSON(`projects/${projectId}`);
        const project = res.data;

        // Project Header
        document.querySelector("#project-title").textContent = project.title;
        document.querySelector("#project-subtitle").textContent =
          project.details;

        // Main Details
        const mainContainer = document.querySelector("#project-main-details");
        mainContainer.innerHTML = `
              <div class="project-overview">
                <h2 class="project-subtopics">Project overview</h2>
                <p class="project-decs">${project.overview}</p>
              </div>

              <div class="Objectives">
                <h2 class="project-subtopics">Objectives</h2>
                <ul class="project-list">
                  ${project.objectives
                    .map(
                      (obj) =>
                        `<li><ion-icon name="send" class="arrow-icon"></ion-icon><span>${obj}</span></li>`
                    )
                    .join("")}
                </ul>
              </div>

              <div class="Objectives">
                <h2 class="project-subtopics">Key Outcomes</h2>
                <ul class="project-list">
                  ${project.outcomes
                    .map(
                      (out) =>
                        `<li><ion-icon name="send" class="arrow-icon"></ion-icon><span>${out}</span></li>`
                    )
                    .join("")}
                </ul>
              </div>

              <div class="Objectives">
                <h2 class="project-subtopics">Technical Approach</h2>
                <p class="project-decs">${project.technicalApproach}</p>
              </div>
            `;

        // Side Details
        const sideContainer = document.querySelector("#project-side-details");
        sideContainer.innerHTML = `
              <div class="project-side-card"><h3>Project Status</h3><p>${
                project.status
              }</p></div>
              <div class="project-side-card"><h3>Duration</h3><p>${
                project.duration
              }</p></div>
              <div class="project-side-card"><h3>Funding</h3><p>${
                project.funding
              }</p></div>
              <div class="project-side-card"><h3>Technologies</h3><ul class="tech-list">${project.technologies
                .map((t) => `<li>${t}</li>`)
                .join("")}</ul></div>
            `;

        // Contributors

        const contribContainer = document.querySelector(
          "#project-contributors"
        );
        contribContainer.innerHTML = project.projectContributors
          .map(
            (c) => `
              <div class="contributor">
                <img src="${c.image}" class="contributor-img" />
                <div class="contributor-text">
                  <p class="contributor-name">${c.name}</p>
                  <p class="contributor-batch">${c.position}</p>
                </div>
              </div>
            `
          )
          .join("");

        // GitHub
        const githubContainer = document.querySelector("#project-github");
        githubContainer.innerHTML = project.repositories
          .map((g) => {
            const imgSrc =
              g.type.toLowerCase() === "github"
                ? "./img/default.jpg"
                : "./img/icon_page.png";
            return `
              <div class="git-hub-repo">
                <img src="${imgSrc}" alt="${g.type} Repo" class="github-img" />
                <div class="repo-content">
                  <h4 class="repo-title">${g.title}</h4>
                  <p class="repo-desc">${g.description}</p>
                  <a href="${g.link}" class="github-link" target="_blank">View on ${g.type} <span>&rarr;</span></a>
                </div>
              </div>
            `;
          })
          .join("");
      } catch (e) {
        console.error("Failed to load project", e);
      }
    })();
  </script>
  <script>
    const btnNav=document.querySelector('.btn-mobile-nav');
    const header=document.querySelector('.header');
      btnNav.addEventListener('click',()=>{
      header.classList.toggle('nav-open');
    })

    window.addEventListener("scroll", function() {
      const header = document.querySelector(".header");
      const logo = header.querySelector("img.escal");
      if (window.scrollY > 50) {
        header.style.backgroundColor ="rgba(255, 255, 255, 0.98)";
        header.style.boxShadow = "0 4px 20px rgba(0, 0, 0, 0.1)";
        logo.src = "./img/logo-3.png";
        logo.style.height="3.8rem" 
      } else {
        header.style.backgroundColor = "transparent";
        header.style.boxShadow = "none";
        logo.src = "./img/logo.png";
        logo.style.height="3.2rem" 
      }
    });



  </script>
</html>
